id: https://www.cdisc.org/ars/1-0
name: ars_ldm

imports:
  - linkml:types

prefixes:
  linkml: https://w3id.org/linkml/

default_range: string

classes:

  NamedObject:
    abstract: true
    slots:
      - name

  ReportingEvent:
    tree_root: true
    is_a: NamedObject
    slots:
      - listOfPlannedAnalyses
      - listOfPlannedOutputs
      - analysisSets
      - analysisGroupings
      - dataSubsets
      - globalDisplaySections
      - analysisCategorizations
      - analyses
      - methods
      - outputs

  NestedList:
    slots:
      - listItems

  OrderedListItem:
    is_a: NamedObject
    slots:
      - level
      - order
      - sublist
      - analysisId
      - outputId
    slot_usage:
      level:
        required: true
      order:
        required: true

  AnalysisCategorization:
    description: An implementer-defined categorization of analyses/outputs.
    slots:
      - id
      - label
      - categories

  AnalysisCategory:
    description: An implementer-defined category of analyses/outputs.
    slots:
      - id
      - label
      - subCategorizations

  Analysis:
    is_a: NamedObject
    slots:
      - id
      - version
      - categoryIds
      - analysisSetId
      - orderedGroupings
      - dataSubsetId
      - dataset
      - variable
      - methodId
      - referencedAnalysisOperations
      - results

  OrderedGroupingFactor:
    slots:
      - order
      - groupingId
      - dataGrouping
      - resultsByGroup
    slot_usage:
      order:
        required: true

  ReferencedAnalysisOperation:
    slots:
      - referencedOperationId
      - analysisId
    slot_usage:
      analysisId:
        required: true

  OperationResult:
    slots:
      - operationId
      - resultGroups
      - rawValue
      - formattedValue

  ResultGroup:
    slots:
      - groupingId
      - groupId
      - groupValue
  
  AnalysisMethod:
    is_a: NamedObject
    slots:
      - id
      - label
      - description
      - operations

  Operation:
    is_a: NamedObject
    slots:
      - id
      - label
      - referencedOperationRelationships
      - resultPattern

  ReferencedOperationRelationship:
    slots:
      - id
      - referencedOperationRole
      - operationId
      - analysisId
      - description

  Output:
    slots:
      - id
      - version
      - fileSpecifications
      - outputDisplays
      - categoryIds
    slot_usage:
      categoryIds:
        required: false
        inlined: false

  File:
    is_a: NamedObject
    slots:
      - fileType
      - location
      - style

  OutputDisplay:
    slots:
      - order
      - display
    slot_usage:
      order:
        required: true

  Display:
    is_a: NamedObject
    slots:
      - id
      - version
      - displayTitle
      - displaySections

  DisplaySection:
    slots:
      - sectionType
      - subSections

  DisplaySubSection:
    slots:
      - id
      - order
      - text    
    slot_usage:
      order:
        required: true

  WhereClause:
    slots:
      - level
      - order
      - condition
      - compoundExpression

  Condition:
    slots:
      - dataset
      - variable
      - comparator
      - value

  CompoundExpression:
    slots:
      - logicalOperator
      - whereClauses

  CompoundSetExpression:
    is_a: CompoundExpression
    slot_usage:
      whereClauses:
        range: AnalysisSet
        inlined: false

  CompoundGroupExpression:
    is_a: CompoundExpression
    slot_usage:
      whereClauses:
        range: Group
        inlined: false

  CompoundSubsetExpression:
    is_a: CompoundExpression
    slot_usage:
      whereClauses:
        inlined: true
        inlined_as_list: true

  AnalysisSet:
    description: >-
      A set of subjects whose data are to be included in the main analyses.
      This should be defined in the statistical section of the protocol.
      NOTE: There are a number of potential analysis sets, including,
      for example, the set based upon the intent-to-treat principle. [ICH E9]
    is_a: WhereClause
    slot_usage:
      compoundExpression:
        range: CompoundSetExpression
    slots:
      - id
      - label

  GroupingFactor:
    abstract: true
    description: A factor used to subdivide either the subject population or data records in an analysis dataset for analysis.
    slots:
      - id
      - label
      - groupingVariable
      - dataDriven
      - groups

  SubjectGroupingFactor:
    is_a: GroupingFactor
    description: A factor used to subdivide the subject population for comparative analysis (e.g., treatment, sex, race, age).
    slot_usage:
      groups:
        range: AnalysisGroup

  DataGroupingFactor:
    is_a: GroupingFactor
    description: A factor used to subdivide data records in an analysis dataset for analysis.
    slot_usage:
      groups:
        range: DataGroup

  Group:
    description: A subdivision of the subject population or analysis dataset record set based on a defined factor.
    is_a: WhereClause
    slot_usage:
      compoundExpression:
        range: CompoundGroupExpression
    slots:
      - id
      - label

  AnalysisGroup:
    description: A subdivision of the subject population based on a defined factor (e.g., subjects whose treatment is Drug A, subjects whose gender is male).
    is_a: Group

  DataGroup:
    description: A subdivision of the analysis dataset records based on a defined factor.
    is_a: Group

  DataSubset:
    description: A subset of data identified by selection criteria for inclusion in the analysis.
    is_a: WhereClause
    slot_usage:
      compoundExpression:
        range: CompoundSubsetExpression
    slots:
      - id
      - label

slots:

  name:
    required: true

  listOfPlannedAnalyses:
    required: true
    range: NestedList

  listOfPlannedOutputs:
    required: false
    range: NestedList

  analysisSets:
    multivalued: true
    inlined: true
    inlined_as_list: true
    range: AnalysisSet

  analysisGroupings:
    multivalued: true
    inlined: true
    inlined_as_list: true
    range: SubjectGroupingFactor

  groupingVariable:
    description: For groupings based on a single variable, a reference to the dataset variable upon which grouping is based.

  dataDriven:
    description: Indicates whether the groups defined by the grouping are prespecified (false) or obtained from distinct data values of the groupingVariable (true).
    range: boolean
    required: true

  groups:
    multivalued: true
    list_elements_ordered: true
    inlined: true
    inlined_as_list: true
    range: Group

  dataSubsets:
    multivalued: true
    inlined: true
    inlined_as_list: true
    range: DataSubset

  analyses:
    multivalued: true
    inlined: true
    inlined_as_list: true
    range: Analysis

  methods:
    multivalued: true
    inlined: true
    inlined_as_list: true
    range: AnalysisMethod

  operations:
    required: true
    multivalued: true
    range: Operation
    inlined: true
    inlined_as_list: true

  referencedOperationId:
    range: ReferencedOperationRelationship
    inlined: false

  analysisCategorizations:
    multivalued: true
    range: AnalysisCategorization
    inlined: true
    inlined_as_list: true

  categories:
    multivalued: true
    range: AnalysisCategory
    inlined: true
    inlined_as_list: true
    required: true

  categoryIds:
    multivalued: true
    range: AnalysisCategory
    inlined: false
    required: false

  subCategorizations:
    multivalued: true
    range: AnalysisCategorization
    inlined: true
    inlined_as_list: true

  outputs:
    multivalued: true
    inlined: true
    inlined_as_list: true
    range: Output

  listItems:
    multivalued: true
    list_elements_ordered: true
    inlined: true
    inlined_as_list: true
    range: OrderedListItem

  level:
    range: integer

  order:
    range: integer

  sublist: 
    range: NestedList
    multivalued: false
    inlined: true

  analysisId: 
    range: Analysis
    multivalued: false
    inlined: false

  analysisSetId: 
    range: AnalysisSet
    multivalued: false
    inlined: false

  orderedGroupings: 
    range: OrderedGroupingFactor
    multivalued: true
    list_elements_ordered: true
    inlined: true
    inlined_as_list: true

  groupingId: 
    range: GroupingFactor
    inlined: false

  dataGrouping: 
    range: DataGroupingFactor
    inlined: true
    inlined_as_list: true

  resultsByGroup:
    description: Indicates whether a result is expected for each group in the grouping.
    range: boolean
    required: true

  dataSubsetId:
    inlined: false
    range: DataSubset

  methodId:  
    range: AnalysisMethod
    required: true
    inlined: false

  description:

  referencedAnalysisOperations:
    multivalued: true
    range: ReferencedAnalysisOperation
    inlined: true
    inlined_as_list: true    

  resultPattern:
  
  results:
    multivalued: true
    range: OperationResult
    inlined: true
    inlined_as_list: true

  resultGroups:
    multivalued: true
    range: ResultGroup
    inlined: true
    inlined_as_list: true

  groupId:
    range: Group
    inlined: false

  groupValue:

  rawValue:

  formattedValue:

  referencedOperationRelationships:
    multivalued: true
    range: ReferencedOperationRelationship
    inlined: true
    inlined_as_list: true
  
  referencedOperationRole:
    required: true
    range: OperationRole

  operationId:  
    range: Operation
    required: true
    inlined: false

  outputId: 
    range: Output
    multivalued: false
    inlined: false

  id:
    required: true
    identifier: true

  version:
    range: integer

  displayTitle:

  fileSpecifications:
    multivalued: true
    inlined: true
    inlined_as_list: true
    range: File

  fileType:
    range: FileType

  location:

  style:

  outputDisplays:
    range: OutputDisplay
    multivalued: true
    inlined: true
    inlined_as_list: true
    list_elements_ordered: true

  display:
    range: Display
    inlined: true

  globalDisplaySections:
    multivalued: true
    inlined: true
    inlined_as_list: true
    range: DisplaySection

  displaySections:
    multivalued: true
    inlined: true
    inlined_as_list: true
    range: DisplaySection

  sectionType:
    range: SectionType

  subSections:
    multivalued: true
    list_elements_ordered: true
    inlined: true
    inlined_as_list: true
    range: DisplaySubSection

  text:

  logicalOperator:
    required: true
    range: LogicalOperator

  condition:
    range: Condition

  compoundExpression:
    range: CompoundExpression

  whereClauses:
    multivalued: true
    list_elements_ordered: true
    inlined: false
    range: WhereClause

  dataset:

  variable:

  comparator:
    range: Comparator

  value:
    multivalued: true

  label:

enums:

  FileType:
    permissible_values:
      pdf:
      rtf:
      txt:

  LogicalOperator:
    permissible_values:
      AND:
      OR:
      NOT:

  Comparator:
    permissible_values:
      EQ:
      NE:
      GT:
      GE:
      LT:
      LE:
      IN:
      NOTIN:

  SectionType:
    permissible_values:
      Title:
      Footnote:
      Abbreviation:
      Legend:
      Rowlabel Header:

  OperationRole:
    permissible_values:
      NUMERATOR:
      DENOMINATOR:
